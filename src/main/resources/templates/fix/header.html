<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS 링크를 Thymeleaf 방식으로 변경 -->
    <link rel="stylesheet" th:href="@{/css/fix/header.css}">
    <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css" rel="stylesheet">
</head>
<body>

<!-- 헤더 Fragment 정의 -->
<header class="header" th:fragment="header">
    <div class="header-nav">
        <div class="container">
            <!-- 로고 - Thymeleaf 링크로 변경 -->
            <a th:href="@{/}">
                <div class="nav-logo-wrapper">
                    <div class="nav-logo"></div>
                </div>
            </a>

            <div class="left-nav">
                <!-- 동행 매칭 -->
                <a th:href="@{/companion-rooms}">
                    <div class="left-nav-menu main-header text-header">동행 매칭</div>
                </a>

                <!-- 공지사항 -->
                <a th:href="@{/customer-support}">
                    <div class="left-nav-menu pr-12 main-header text-header">
                        공지사항
                        <div class="img-container"></div>
                    </div>
                </a>

                <!-- 감정 여행 -->
                <a th:href="@{/emotions}">
                    <div class="left-nav-menu main-header text-header">감정 여행</div>
                </a>

                <!-- 검색바 -->
                <div class="left-nav-menu pr-12 main-header text-header search-bar-wrapper" style="margin-left: 100px;">
                    <form class="search-bar" th:action="@{/search}" method="get">
                        <input
                                type="text"
                                name="q"
                                placeholder="감정을 입력하세요"
                                class="search-input"
                        />
                        <button type="submit" class="search-btn" aria-label="검색">
                            <img th:src="@{/image/default-common/search.png}" alt="검색" class="search-icon">
                        </button>
                    </form>
                </div>
            </div>

            <!-- 로그인/회원가입 (로그인 전) -->
            <div class="right-nav" th:if="${session.user == null}">
                <a th:href="@{/login}">
                    <div class="log-in-section main-header text-header">로그인</div>
                </a>
                <a th:href="@{/signup}">
                    <div class="sign-up-button body-2-medium">회원가입</div>
                </a>
            </div>

            <!-- 프로필 메뉴 (로그인 후) -->
            <div class="right-nav" th:if="${session.user != null}">
                <div class="profile-menu-wrapper">
                    <div class="profile-thumb" id="profileThumb">
                        <img th:src="@{/image/default-common/profile-default.png}" alt="프로필" id="profileImg" />
                    </div>
                    <div class="profile-dropdown" id="profileDropdown">
                        <div class="profile-info">
                            <div class="profile-nickname" id="profileNickname" th:text="${session.user.nickname}">닉네임</div>
                            <div class="profile-email" id="profileEmail" th:text="${session.user.email}">user@email.com</div>
                        </div>
                        <button class="profile-btn" id="profileManageBtn">프로필 관리</button>
                        <button class="logout-btn" id="logoutBtn">로그아웃</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 드롭다운 메뉴 -->
        <div class="dropdown-nav-container" style="top: 65px;">
            <div class="dropdown-nav">
                <div class="dropdown-menu-container" style="margin-left: 130px;">
                    <!-- 동행 매칭 드롭다운 -->
                    <div class="dropdown-menu-list" style="width: 109px;">
                        <a class="dropdown-menu-item" th:href="@{/companion-rooms/create}">방 만들기</a>
                        <a class="dropdown-menu-item" th:href="@{/companion-rooms}">방 입장하기</a>
                        <a class="dropdown-menu-item" th:href="@{/scheduling}">스케줄 짜기</a>
                    </div>

                    <!-- 공지사항 드롭다운 -->
                    <div class="dropdown-menu-list" style="width: 90px;">
                        <a class="dropdown-menu-item" th:href="@{/faqs}">자주 찾는 질문</a>
                    </div>

                    <!-- 감정 여행 드롭다운 -->
                    <div class="dropdown-menu-list" style="width: 145px;">
                        <!-- 비어있음 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- JavaScript 파일들 -->
<script th:src="@{/js/fix/header.js}"></script>

</body>
</html>