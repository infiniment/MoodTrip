<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>무드트립 고객센터</title>
    <link rel="stylesheet" href="/css/customer-center/customer-center.css">
    <link rel=" stylesheet" th:href="@{/css/fix/header.css}">
    <link rel="stylesheet" th:href="@{/css/fix/footer.css}">
    <link rel="stylesheet" th:href="@{/css/fix/header-after.css}">

</head>
<!-- 로그인 상태에 따른 조건부 헤더 렌더링 -->
<div th:if="${isLoggedIn}">
    <!-- 로그인된 사용자용 헤더 -->
    <th:block th:replace="~{fix/header-after-login :: header}"></th:block>
</div>
<div th:unless="${isLoggedIn}">
    <!-- 로그인 안된 사용자용 헤더 -->
    <th:block th:replace="~{fix/header :: header}"></th:block>
</div>
<body>
    <main class="support-main">
        <div class="support-container">
            <!-- 헤더 섹션 -->
            <header class="support-header">
                <div class="welcome-section">
                    <div class="welcome-message">
                        <h1>안녕하세요, 무드 트립 고객센터 입니다</h1>
                        <p>무엇을 도와드릴까요?</p>
                    </div>
                </div>
                
                <div class="search-section">
                    <div class="search-wrapper">
                        <input 
                            type="text" 
                            id="support-search-input" 
                            class="search-input" 
                            placeholder="도움이 필요하시거나 궁금한 점을 검색해주세요!" 
                            autocomplete="off"
                        >
                        <button type="button" class="search-button" onclick="searchFAQ()">검색</button>
                    </div>
                    <span class="search-error-message" id="search-error">에러상세 메시지</span>
                </div>
            </header>

            <!-- 메인 컨텐츠 섹션 -->
            <section class="support-content">
                <!-- 네비게이션 탭 -->
                <nav class="content-navigation">
                    <a href="#faq" class="nav-tab active" data-tab="faq">
                        <span class="nav-tab-title">자주 묻는 질문</span>
                    </a>
                    <a href="#notice" class="nav-tab" data-tab="notice">
                        <span class="nav-tab-title">공지사항</span>
                    </a>
                </nav>

                <!-- FAQ 섹션 -->
                <article class="faq-content active" id="faq-section">
                    <div class="section-header">
                        <h2 class="section-title">자주 묻는 질문</h2>
                    </div>
                    
                    <!-- FAQ 카테고리 -->
                    <div class="faq-categories" id="faq-categories">
                        <button class="category-button active" data-category="service">서비스 소개</button>
                        <button class="category-button" data-category="profile">회원 정보</button>
                        <button class="category-button" data-category="usage">이용 방법</button>
                        <button class="category-button" data-category="payment">결제</button>
                        <button class="category-button" data-category="refund">취소·환불</button>
                        <button class="category-button" data-category="dispute">분쟁·페널티</button>
                    </div>

                    <!-- FAQ 목록 -->
                    <div class="faq-list" id="faq-list">
                        <a th:each="faq : ${faqs}"
                           th:href="@{/customer-center/faq-detail(id=${faq.id})}"
                           class="faq-item"
                           target="_blank"
                           th:text="|[${faq.category}] ${faq.title}|">
                        </a>
                    </div>

                    <a href="/customer-center/faq" class="view-more-button">
                        더 보러 가기
                    </a>
                </article>

                <!-- 공지사항 섹션 -->
                <article class="notice-content" id="notice-section">
                    <div class="notice-header">
                        <h2 class="section-title">공지사항</h2>
                        <!-- 공지사항 href 수정해야 함 -->
                        <a href="/customer-center/announcement" class="view-all-link">
                            전체보기 &gt;
                        </a>
                    </div>

                    <ul class="notice-list">
                        <li th:each="notice : ${notices}"
                            class="notice-item"
                            th:onclick="|location.href='@{/customer-center/announcement-detail(id=${notice.id})}'|"
                            role="link" tabindex="0" style="cursor:pointer">
                            <div class="notice-label">공지</div>
                            <div class="notice-title" th:text="${notice.title}"></div>
                            <div class="notice-date"
                                 th:text="${#temporals.format(notice.registeredDate, 'yyyy.MM.dd')}"></div>
                        </li>
                    </ul>
                </article>
            </section>
        </div>
    </main>

    <script src="/js/customer-center/customer-center.js"></script>
    <th:block th:replace="~{fix/footer :: footer}"></th:block>

    <script th:src="@{/js/fix/header.js}"></script>
    <script th:src="@{/js/fix/header-after.js}"></script>
</body>
</html>